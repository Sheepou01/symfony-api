{% extends 'base.html.twig' %}

{% block title %}Connexion{% endblock %}

{% block body %}
{% if app.user.role is defined and app.user.role.code == 'ROLE_USER' %}
<p>Vous n'êtes pas autorisé à accéder à ce site</p>
{% elseif is_granted('ROLE_ADMIN') %}
<p>Bienvenue <strong>{{ app.user.username }}</strong> sur l'administration de 5 minutes à perdre</p>
<p>Choisissez parmi le menu en haut quelle catégorie vous voulez gérer.</p>
{% endif %}
<h2> Connexion </h2>

{% if error %}
<div class="alert alert-danger col-md-6 mx-auto">Identifiant et/ou mot de passe incorrect(s)</div>
{% endif %}

<form action="{{ path('signin') }}" method="post">
{# {{dump(error)}} #}
    <div class="form-group form-row justify-content-center">
        <div class="col-md-6">
            <label for="username">Email</label>
            <input type="text" placeholder="Rentrez votre adresse mail" class="form-control" required name = "_username" value = "{{ last_username }}">    
        </div>
    </div>
    <div class="form-group form-row justify-content-center">
        <div class="col-md-6">
            <label for="password">Mot de passe</label>
            <input type="password" placeholder="Rentrez votre mot de passe" class="form-control" required name = "_password">    
        </div>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-success">Connexion</button>
    </div>
</form>

{% endblock %}
